<div id="conversions" class="row-fluid">
	<div class="span12">
		<%= box(:title => "Conversões", :icon => "fa-icon-filter")  do %>
			<h3>Escolha a data de início e de fim para gerar os funís de conversão dos cursos:</h3>
			<div class="row-fluid" id='conversion-dates'>
				<div class="span3">
					<div class="input-append">
			      <%= text_field_tag :start_date, nil, :class => "_date_minimum", :placeholder=>"Data de início" %>
			      <span class="add-on">
			      	<i class="icon-th"></i>
			      </span>
			     </div>
			  </div>

			  <div class="span3">
			    <div class="input-append">
			      <%= text_field_tag :end_date, nil, :class => "_date_minimum", :placeholder=>"Data de fim" %>
			      <span class="add-on">
			      	<i class="icon-th"></i>
			      </span>
			    </div>
			  </div>

			  <div class="span2">
		      <%= link_to_function "Gerar →", "conversions_graphic();", :class => "btn btn-success", :id => "buscar" %>
		    </div>
	    </div>

	    <hr>

			<div class="row-fluid">
				<div class="span12">
					<p id="conversion-disclaimer" class="hidden"><i class="icon-exclamation-sign"></i> Importante: O usuário pode incluir o curso no carrinho sem, necessariamente, visitar a página de vendas.</p>
				</div>
			</div>
			<div class="row-fluid">
				<% @courses.each_with_index do |course, i| %>
					<div class="span6">
						<div id="container-highchart-course-<%= i %>" class="container-highchart-funnel hidden"></div>
					</div>
				<% end %>
			</div>

			<div id="conversions-course-ids"><%= @courses.map(&:id).join(';') %></div>
		<% end %>
	</div>	
</div>

<script src="http://code.highcharts.com/modules/funnel.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('._date_minimum').keydown(function(e) {
		  e.preventDefault();
		  return false;
		});
	});
</script>