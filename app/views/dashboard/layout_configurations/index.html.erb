<%= simple_form_for @layout, url: dashboard_layout_configuration_path(@layout) do |f| %>
<div class="row-fluid">

	<div class="span5">
		<%= box(:title => "Logo da escola", :icon => "fa-icon-picture")  do %>
			<% if @layout.site_logo.present? %>
        <%= link_to image_tag(@layout.site_logo.url(:medium), :class => "img-polaroid pagination-centered"), @layout.site_logo.url %>
      <% else %>
        	<div style="margin-left: 10px; background: white; width: 80px; height: 50px; padding-top: 30px; text-align: center; vertical-align: center;" class="thumbnail"><i class="icon-camera" style="opacity: 0.6;"></i></div>
      <% end -%>
      <br>
      <br>
      <div class="row-fluid">
      	<div class="span12">
					<i class="icon-exclamation-sign"></i> <strong>Importante:</strong> Tamanho ideal: <strong>300x75</strong>.</p>
				</div>
			</div>
			<hr>
      <%= f.input :site_logo, label: false %>
		<% end %>
	
		<%= box(:title => "Figura em destaque na home", :icon => "fa-icon-picture")  do %>
			<% if @layout.home_logo.present? %>
        <%= link_to image_tag(@layout.home_logo.url(:medium), :class => "img-polaroid"), @layout.home_logo.url %>
        <p class="muted">Imagem redimensionada.</p>
      <% else %>
      	<div style="margin-left: 10px; background: white; width: 80px; height: 50px; padding-top: 30px; text-align: center; vertical-align: center;" class="thumbnail"><i class="icon-camera" style="opacity: 0.6;"></i></div>
      <% end -%>
			<div class="row-fluid">
				<div class="span12">
					<i class="icon-exclamation-sign"></i> <strong>Importante:</strong> Tamanho ideal: <strong>500x280</strong> (Propoção 16 por 9).</p>
				</div>
			</div>
			<hr>
      <%= f.input :home_logo, label: false %>
		<% end %>

		<%= box(:title => "Vídeo em destaque na home", :icon => "fa-icon-facetime-video")  do %>
			<% if @layout.video_url.present? %>
				<p>Atual:</p>
        <iframe width="380" height="220" src="//www.youtube.com/embed/<%= @layout.video_url %>?autoplay=0&autohide=1" frameborder="0" allowfullscreen></iframe>
        <hr>
      <% end -%>
      <%= f.input :video_url, as: :string, :placeholder => "Ex.: xopXSq8oz8c", label: "Código do vídeo no YouTube:" %>
			<div class="row-fluid">
				<div class="span12">
					<p><i class="icon-exclamation-sign"></i> <strong>Importante 01:</strong> Se a URL do seu vídeo é <em>http://www.youtube.com/watch?v=xopXSq8oz8c</em>, o código do vídeo será <strong>xopXSq8oz8c</strong>.</p>
					<p><i class="icon-exclamation-sign"></i> <strong>Importante 02:</strong> Este vídeo substituirá a imagem em destaque do curso. Deixe em branco para remover o vídeo e retornar com a imagem.</p>
					<p><i class="icon-exclamation-sign"></i> <strong>Importante 03:</strong> No momento apenas vídeos no YouTube irão funcionar.</p>
				</div>
			</div>
			<hr>
		<% end %>
	</div>

	<div class="span7">
		<%= box(:title => "Textos", :icon => "fa-icon-font")  do %>
			<%= f.input :title, required: false, label: "Título do site", placeholder: 'Edools.com | sua escola online', input_html: { class: "span12"} %>
			<%= f.input :home_title, required: false, as: :text, label: "Título em destaque na home", input_html: { class: "span12", size: "100x2"} %>
			<%= f.input :home_subtitle, required: false, as: :text, label: "Subtítulo em destaque na home", input_html: { class: "span12", size: "100x2"} %>
		<% end %>

		<%= box(:title => "Cores", :icon => "fa-icon-magic")  do %>
			<div class="row-fluid">
				<div class="span12">
					<h3>Geral</h3>
					<hr>
				</div>

				<div class="span4">
					<%= f.input :background, required: false, input_html: { class: "_colorpicker"}, label: "Fundo" %>	
				</div>
				<div class="span4">
					<%= f.input :main_color, required: false, input_html: { class: "_colorpicker"}, label: "Barra de destaque" %>
				</div>
				<div class="span4">
					<%= f.input :menu_bar, required: false, input_html: { class: "_colorpicker"}, label: "Menu superior" %>
				</div>
				<br>
				<div class="span4">
					<%= f.input :menu_link_color, required: false, input_html: { class: "_colorpicker"}, label: "Links do menu" %>
				</div>
				<div class="span4">
					<%= f.input :menu_link_hover_color, required: false, input_html: { class: "_colorpicker"}, label: "Links do menu em destaque" %>
				</div>
			</div>

			<div class="row-fluid">
				<div class="span12">
					<h3>Boxes</h3>
					<hr>
				</div>

				<div class="span4">
					<%= f.input :box_header, required: false, input_html: { class: "_colorpicker"}, label: "Cabeçalho dos boxes" %>
				</div>
				<div class="span4">
					<%= f.input :box_header_color, required: false, input_html: { class: "_colorpicker"}, label: "Fonte dos cabeçalhos" %>
				</div>
				<div class="span4">
					<%= f.input :box_content, required: false, input_html: { class: "_colorpicker"}, label: "Fundo dos boxes" %>
				</div>
				<br>
				<div class="span4">
					<%= f.input :box_content_color, required: false, input_html: { class: "_colorpicker"}, label: "Fonte dos boxes" %>
				</div>
			</div>

			<div class="row-fluid">
				<div class="span12">
					<h3>Página inicial da escola</h3>
					<hr>
				</div>

				<div class="span4">
					<%= f.input :title_home_color, required: false, input_html: { class: "_colorpicker"}, label: "Título e subtítulo" %>
				</div>
				<div class="span4">
					<%= f.input :home_title_subtitle_shadow, required: false, input_html: { class: "_colorpicker"}, label: "Sombra do título e subtítulo" %>
				</div>
			</div>
			<hr>
			<p class="muted">Deixe em branco para utilizar as cores padrão.</p>
		<% end %>
	</div>
</div>
<hr>
  <%#= link_to_function "Pré-visualizar", "reloadPreview();", class: "btn btn-large" %>
  <div class="form-actions">
		<%= f.submit "Salvar", class: "btn btn-success btn-large", id: "save-domain" %>
	</div>
<% end %>
<hr>
<%= box(:title => "Veja o resultado")  do %>
	<div style="overflow-x: scroll;">
		<iframe id="iframe" src="<%= root_path(subdomain: current_user.school.subdomain) %>" width="1280" height="1024px"></iframe>
	</div>
<% end %>

<script type="text/javascript">
	$(document).ready(function () {
		$('._colorpicker').each(function () {
			$(this).minicolors();
		});
  
    reloadPreview = function() {
          var params = {
            background: $('#layout_configuration_background').val(), 
            menu_bar: $('#layout_configuration_menu_bar').val(),
            box_header: $('#layout_configuration_box_header').val()
          };
          $('#iframe').attr('src', "<%= root_path(subdomain: current_user.school.subdomain) %>" + "?" + $.param(params));
        };
    	});
</script>